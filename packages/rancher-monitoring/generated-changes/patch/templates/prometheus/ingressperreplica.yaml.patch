--- charts-original/templates/prometheus/ingressperreplica.yaml
+++ charts/templates/prometheus/ingressperreplica.yaml
@@ -22,13 +22,18 @@
         app: {{ include "kube-prometheus-stack.name" $ }}-prometheus
 {{ include "kube-prometheus-stack.labels" $ | indent 8 }}
       {{- if $ingressValues.labels }}
-      {{ toYaml $ingressValues.labels | indent 8 }}
+{{ toYaml $ingressValues.labels | indent 8 }}
       {{- end }}
       {{- if $ingressValues.annotations }}
       annotations:
 {{ toYaml $ingressValues.annotations | indent 8 }}
       {{- end }}
     spec:
+      {{- if or ($.Capabilities.APIVersions.Has "networking.k8s.io/v1/IngressClass") ($.Capabilities.APIVersions.Has "networking.k8s.io/v1beta1/IngressClass") }}
+      {{- if $ingressValues.ingressClassName }}
+      ingressClassName: {{ $ingressValues.ingressClassName }}
+      {{- end }}
+      {{- end }}
       rules:
         - host: {{ $ingressValues.hostPrefix }}-{{ $i }}.{{ $ingressValues.hostDomain }}
           http:
